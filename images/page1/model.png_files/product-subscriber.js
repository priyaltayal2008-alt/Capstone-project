(function(){function T(e){Object.defineProperty(e,"__esModule",{value:!0,configurable:!0})}function o(e,i,c,t){Object.defineProperty(e,i,{get:c,set:t,enumerable:!0,configurable:!0})}var b=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{},a=b.parcelRequire94c2,l=a.register;l("kWDbk",function(e,i){T(e.exports),o(e.exports,"default",function(){return p});var c=a("519R9"),t=a("by5FG"),s=a("1gMBH");class n{initExternalMessagingSubscriptions(){c.default.subscribeMultipleEvents({eventNames:t.EXTERNAL_EVENTS_TO_SUBSCRIBE,callback:s.externalMessagingHandler})}init(){this.initExternalMessagingSubscriptions()}}const _=new n;Object.freeze(_);var p=_}),l("by5FG",function(e,i){o(e.exports,"EXTERNAL_EVENTS_TO_SUBSCRIBE",function(){return t}),o(e.exports,"ALLOWED_PRODUCT_FIELDS_TO_UPDATE",function(){return s}),o(e.exports,"ALLOWED_VARIANT_FIELDS_TO_UPDATE",function(){return n});var c=a("kHyIS");const t=[c.EXTERNAL_EVENTS_TO_POST.productUpdate],s=["id","descriptionHtml","description_html","variants","price","compare_at_price","title"],n=["id","price","compare_at_price","title"]}),l("kHyIS",function(e,i){o(e.exports,"EXTERNAL_EVENTS_TO_SUBSCRIBE",function(){return c}),o(e.exports,"EXTERNAL_EVENTS_TO_POST",function(){return t}),o(e.exports,"ALLOWED_EXTERNAL_EVENTS_TO_SUBSCRIBE",function(){return s}),o(e.exports,"ALLOWED_EXTERNAL_EVENTS_TO_POST",function(){return n});const c={addToCart:"tolstoy_add_to_cart",spotlightCarouselQuickShopClick:"tolstoy_spotlight_carousel_quick_shop_click",productCardClick:"tolstoy_product_card_click"},t={addToCartSuccess:"tolstoy_add_to_cart_success",addToCartError:"tolstoy_add_to_cart_error",acceptCookiePolicy:"tolstoy_accept_cookie_policy",rejectCookiePolicy:"tolstoy_reject_cookie_policy",tolstoyZIndexChange:"tolstoy_z_index_change",urlLocaleUpdate:"tolstoy_url_locale_update",productUpdate:"tolstoy_product_update"},s=Object.values(c),n=new Set([t.addToCartSuccess,t.addToCartError,t.acceptCookiePolicy,t.rejectCookiePolicy,t.tolstoyZIndexChange,t.urlLocaleUpdate,t.productUpdate])}),l("1gMBH",function(e,i){o(e.exports,"externalMessagingHandler",function(){return y});var c=a("519R9"),t=a("aEodP"),s=a("kHyIS"),n=a("by5FG");const _=r=>n.ALLOWED_PRODUCT_FIELDS_TO_UPDATE.includes(r),p=r=>Array.isArray(r)?r.flatMap((f,d)=>{const $=Object.keys(f).filter(S=>!n.ALLOWED_VARIANT_FIELDS_TO_UPDATE.includes(S));return $.length===0?[]:`variants[${d}]: { ${$.join(", ")} }`}):["variants (must be an array)"],u=({product:r})=>{const d=Object.keys(r).filter(E=>!_(E));if(r.variants&&d.push(...p(r.variants)),d.length>0){console.error(`Fields ${d.join(", ")} are not supported for product update.`);return}c.default.postMessage({product:r,eventName:t.INTERNAL_EVENTS.productUpdateResponse})},y=({data:r})=>{switch(r.eventName){case s.EXTERNAL_EVENTS_TO_POST.productUpdate:return u(r);default:return null}}})})();
