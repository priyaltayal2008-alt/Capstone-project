(function(){function N(e){Object.defineProperty(e,"__esModule",{value:!0,configurable:!0})}function c(e,u,r,a){Object.defineProperty(e,u,{get:r,set:a,enumerable:!0,configurable:!0})}var b=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{},s=b.parcelRequire94c2,E=s.register;E("l8cxn",function(e,u){N(e.exports),c(e.exports,"default",function(){return f});var r=s("kHyIS"),a=s("519R9"),o=s("aEodP"),n=s("kr6To");const p=[o.INTERNAL_EVENTS.addToCart,o.INTERNAL_EVENTS.spotlightCarouselQuickShopClick,o.INTERNAL_EVENTS.externalEventSubscribed],_=[r.EXTERNAL_EVENTS_TO_POST.addToCartSuccess,r.EXTERNAL_EVENTS_TO_POST.addToCartError];class d{constructor(){if(d.instance)return d.instance;d.instance=this}internalMessagingHandler=t=>{switch(t.data.eventName){case o.INTERNAL_EVENTS.addToCart:return(0,n.handleAddToCartMessage)(t);case o.INTERNAL_EVENTS.spotlightCarouselQuickShopClick:return(0,n.handleSpotlightQuickShopMessage)(t);case o.INTERNAL_EVENTS.externalEventSubscribed:return(0,n.handleExternalEventSubscribed)(t);default:return null}};externalMessagingHandler=t=>{switch(t.data.eventName){case r.EXTERNAL_EVENTS_TO_POST.addToCartSuccess:return(0,n.handleAddToCartSuccess)(t);case r.EXTERNAL_EVENTS_TO_POST.addToCartError:return(0,n.handleAddToCartError)(t);default:return null}};initInternalMessagingSubscriptions=()=>{a.default.subscribeMultipleEvents({eventNames:p,callback:this.internalMessagingHandler})};initExternalMessagingSubscriptions=()=>{a.default.subscribeMultipleEvents({eventNames:_,callback:this.externalMessagingHandler})};init(){this.initInternalMessagingSubscriptions(),this.initExternalMessagingSubscriptions()}}const T=new d;Object.freeze(T);var f=T}),E("kHyIS",function(e,u){c(e.exports,"EXTERNAL_EVENTS_TO_SUBSCRIBE",function(){return r}),c(e.exports,"EXTERNAL_EVENTS_TO_POST",function(){return a}),c(e.exports,"ALLOWED_EXTERNAL_EVENTS_TO_SUBSCRIBE",function(){return o}),c(e.exports,"ALLOWED_EXTERNAL_EVENTS_TO_POST",function(){return n});const r={addToCart:"tolstoy_add_to_cart",spotlightCarouselQuickShopClick:"tolstoy_spotlight_carousel_quick_shop_click",productCardClick:"tolstoy_product_card_click"},a={addToCartSuccess:"tolstoy_add_to_cart_success",addToCartError:"tolstoy_add_to_cart_error",acceptCookiePolicy:"tolstoy_accept_cookie_policy",rejectCookiePolicy:"tolstoy_reject_cookie_policy",tolstoyZIndexChange:"tolstoy_z_index_change",urlLocaleUpdate:"tolstoy_url_locale_update",productUpdate:"tolstoy_product_update"},o=Object.values(r),n=new Set([a.addToCartSuccess,a.addToCartError,a.acceptCookiePolicy,a.rejectCookiePolicy,a.tolstoyZIndexChange,a.urlLocaleUpdate,a.productUpdate])}),E("kr6To",function(e,u){c(e.exports,"handleAddToCartError",function(){return _}),c(e.exports,"handleAddToCartMessage",function(){return d}),c(e.exports,"handleSpotlightQuickShopMessage",function(){return T}),c(e.exports,"handleExternalEventSubscribed",function(){return f}),c(e.exports,"handleAddToCartSuccess",function(){return $});var r=s("hP9Uw"),a=s("kHyIS"),o=s("aEodP"),n=s("519R9");const p=({description:t})=>{switch(t){case r.ADD_TO_CART_ERROR_DESCRIPTIONS.itemSoldOut:return o.INTERNAL_EVENTS.addToCartSoldOut;default:return o.INTERNAL_EVENTS.addToCartError}},_=({data:t})=>{const{description:i}=t,l=p({description:i});n.default.postMessage({...t,eventName:l})},d=({data:t})=>{const{variantId:i,productId:l,transmissionId:S,quantity:C,productHandle:R,templateSuffix:I}=t;n.default.postMessage({variantId:i,productId:l,transmissionId:S,quantity:C,productHandle:R,eventName:a.EXTERNAL_EVENTS_TO_SUBSCRIBE.addToCart,templateSuffix:I})},T=({data:t})=>{const{product:i,transmissionId:l}=t;n.default.postMessage({product:i,transmissionId:l,eventName:a.EXTERNAL_EVENTS_TO_SUBSCRIBE.spotlightCarouselQuickShopClick})},f=({data:t})=>{const{subscribedEventName:i,payload:l={}}=t,{disableDefault:S}=l;switch(i){case a.EXTERNAL_EVENTS_TO_SUBSCRIBE.addToCart:case a.EXTERNAL_EVENTS_TO_SUBSCRIBE.spotlightCarouselQuickShopClick:S&&n.default.postMessage({eventName:o.INTERNAL_EVENTS.addToCartDisableDefault});break;default:return null}},$=({data:t})=>{n.default.postMessage({...t,eventName:o.INTERNAL_EVENTS.addToCartSuccess})}}),E("hP9Uw",function(e,u){c(e.exports,"ADD_TO_CART_ERROR_DESCRIPTIONS",function(){return r}),c(e.exports,"SHOPIFY_CART_ATTRIBUTES",function(){return a});const r={itemSoldOut:"itemSoldOut"},a={tolstoyAnonymousId:"__tolstoyAnonymousId"}})})();
