(function(){function t(e,P,n,b){Object.defineProperty(e,P,{get:n,set:b,enumerable:!0,configurable:!0})}var Q=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{},d=Q.parcelRequire94c2,O=d.register;O("2S3LN",function(e,P){t(e.exports,"getPublicId",function(){return r}),t(e.exports,"getEmbedPublishId",function(){return v}),t(e.exports,"getEmbedCollectionId",function(){return E}),t(e.exports,"reloadFontIfNeeded",function(){return m}),t(e.exports,"getVideoBaseUrl",function(){return C}),t(e.exports,"isInViewport",function(){return T}),t(e.exports,"getAllElements",function(){return A}),t(e.exports,"stopAllVideos",function(){return _}),t(e.exports,"stopDynamicVideos",function(){return R}),t(e.exports,"onViewPortChangeHandler",function(){return H}),t(e.exports,"getConfig",function(){return D}),t(e.exports,"shouldForceMute",function(){return B}),t(e.exports,"getMessageFromError",function(){return k}),t(e.exports,"getIsElementVisible",function(){return z}),t(e.exports,"getPageVariantId",function(){return j});var n=d("ljwIw"),b=d("68VIL"),p=d("519R9"),h=d("aEodP"),I=d("dQiGr"),w=d("6QfcD"),i=d("jvykV"),o=d("kK0IS"),u=d("kCbDV"),l=d("1A9Dw"),$=d("8ZCcc"),g=d("6MJM3"),f=d("iG8TK");const r=(c,a,y)=>y?`${c}-${a}-${y}`:`${c}-${a}`,v=c=>c.dataset.publishId?c.dataset.publishId.toLowerCase():c.id?c.id.split("_")[0].toLowerCase():"",E=c=>c?.dataset?.collectionId,m=c=>{const a=c?.design?.branding?.typography?.font,y=c?.design?.branding?.typography?.fontHeading;!a?.family&&!y?.family||(a?.family&&(0,i.reloadFont)(a),y?.family&&(0,i.reloadFont)(y,"tolstoy-custom-heading-font-family"))},C=({step:c,embedMotion:a,isStory:y,loadAll:L=!1,isCarouselPlayInTileFirst:S})=>{if(a===f.EMBED_CAROUSEL_MOTION.static||S)return null;const U=window.innerWidth<=450,N=a===f.EMBED_CAROUSEL_MOTION.hoverOver,M=a===f.EMBED_CAROUSEL_MOTION.dynamic;return M&&L?(0,g.getBaseUrl)({step:c,isStory:y}):N&&U||M?null:(0,g.getBaseUrl)({step:c,isStory:y})},T=c=>{const a=c.getBoundingClientRect();return a.top>=-a.height&&a.left>=0&&a.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&a.right<=(window.innerWidth||document.documentElement.clientWidth)},A=(c,a)=>window.document.querySelectorAll(`[data-tolstoy-element="${r(c,a)}"]`),_=({videoClass:c,publishId:a,removeEventListenerFunction:y})=>{const L=A(c,a);for(const S of L)S.pause(),y?.(S)},R=({videoClass:c,publishId:a,setIsDynamicVideoRunning:y,onVideoEnd:L})=>{y(!1),_({videoClass:c,publishId:a,removeEventListenerFunction:S=>{S.removeEventListener("ended",L)}})},H=({videoClass:c,isDynamicVideoRunning:a,setIsDynamicVideoRunning:y,dynamicVideoHandler:L,publishId:S,onVideoEnd:W})=>{const U=A(c,S);if(U.length===0)return;const N=T(U[0]);!N&&a?(R({videoClass:c,publishId:S,setIsDynamicVideoRunning:y,onVideoEnd:W}),y(!1)):N&&!a&&(L(),y(!0))},D=async({publishId:c,productId:a,widgetType:y,tags:L,appUrl:S,variantId:W})=>{const U=a&&a!==u.PLACEHOLDER_PRODUCT_ID?o.getConfigByProductId:o.getConfigByUrl,N=window.tolstoyAppKey||(0,w.getAppKey)()||"",M=new URLSearchParams(window.location.search),Y=W||M.get("variant"),V=await U({productId:a,defaultPublishId:c,widgetType:y,appKey:N,tags:L,appUrl:S,variantId:Y});return(new l.default(y).init(V)||{}).hideElement?{disabled:!0}:(V?.disabled||((0,$.getFeatureIsEnabled)({config:V,featureKey:I.FEATURE_BLOCK_SHOPIFY_ADD_TO_CART_ATTRIBUTE})&&p.default.postMessage({eventName:h.INTERNAL_EVENTS.blockAnonymousIdToCart,appKey:N}),V?.openCommerceSettings&&p.default.postMessage({eventName:h.INTERNAL_EVENTS.openCommerceSettingsUpdate,openCommerceSettings:V.openCommerceSettings})),V)};function B(c,a){return!!(a==null?c:!a)}const k=c=>{const a=N=>{const M=(0,n.stringToHTML)(N);return M.style.verticalAlign="middle",M.style.margin="0 5px",M.style.marginBottom="3px",M},y=document.createElement("p"),L=a((0,b.getWarningIcon)()),S=a((0,b.getPublishIcon)());return y.append(L),({"Invalid publishId":["Add the publish ID from the",S,"tab of your project in Tolstoy"],"Project is not live":["Your project is in draft. Publish project in the",S," tab of your project in Tolstoy"],"Project is deleted":["Project has been deleted"],"No videos found":["Select videos in the Videos tab of your project in Tolstoy"],"No filtered videos found":["Select videos in the Videos tab of your project in Tolstoy"],"No connections found":["Select videos in the Videos tab of your project in Tolstoy"],"No videos found for product":["Add tagged videos for this product in the Videos tab of your project in Tolstoy"]}[c]||["Couldn't find product page"]).forEach(N=>{typeof N=="string"?y.append(document.createTextNode(N)):y.append(N)}),y},z=({element:c})=>{const a=c.getBoundingClientRect();return a.width===0||a.height===0?!1:a.top>=0&&a.left>=0&&a.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&a.right<=(window.innerWidth||document.documentElement.clientWidth)},j=()=>new URLSearchParams(window.location.search).get("variant")}),O("68VIL",function(e,P){t(e.exports,"xButtonsSvg",function(){return n}),t(e.exports,"getFeedXButtonSvg",function(){return b}),t(e.exports,"getPlayButtonSvg",function(){return p}),t(e.exports,"leftArrowSvg",function(){return h}),t(e.exports,"rightStraightArrowSvg",function(){return I}),t(e.exports,"rightChevron",function(){return w}),t(e.exports,"getPauseSvg",function(){return i}),t(e.exports,"getMutedSvg",function(){return o}),t(e.exports,"getUnmutedSvg",function(){return u}),t(e.exports,"getWarningIcon",function(){return l}),t(e.exports,"getPublishIcon",function(){return $});const n=`<svg style="margin-left: 0.5px; width: 11px !important; height: 10px !important;" width="11" height="10" viewBox="0 0 14 13" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M13.0547 12.5938C12.8203 12.8281 12.3906 12.8281 12.1562 12.5938L7 7.39844L1.80469 12.5938C1.57031 12.8281 1.14062 12.8281 0.90625 12.5938C0.671875 12.3594 0.671875 11.9297 0.90625 11.6953L6.10156 6.5L0.90625 1.34375C0.671875 1.10938 0.671875 0.679688 0.90625 0.445312C1.14062 0.210938 1.57031 0.210938 1.80469 0.445312L7 5.64062L12.1562 0.445312C12.3906 0.210938 12.8203 0.210938 13.0547 0.445312C13.2891 0.679688 13.2891 1.10938 13.0547 1.34375L7.85938 6.5L13.0547 11.6953C13.2891 11.9297 13.2891 12.3594 13.0547 12.5938Z" fill="white"/>
</svg>
`,b=(f="#FFFFFF")=>`<svg width="18" height="18" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16.055 16.594a.662.662 0 0 1-.899 0L10 11.398l-5.195 5.196a.662.662 0 0 1-.899 0 .662.662 0 0 1 0-.899L9.102 10.5 3.906 5.344a.662.662 0 0 1 0-.899.662.662 0 0 1 .899 0L10 9.641l5.156-5.196a.662.662 0 0 1 .899 0 .662.662 0 0 1 0 .899L10.859 10.5l5.196 5.195a.662.662 0 0 1 0 .899Z" style="fill: ${f};"
   /></svg>`,p=(f="#fff",r="")=>`<svg class="${r}" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M4 3.532c0-1.554 1.696-2.514 3.029-1.715l14.113 8.468c1.294.777 1.294 2.653 0 3.43L7.029 22.183c-1.333.8-3.029-.16-3.029-1.715V3.532Z" fill="${f}"/></svg>`,h='<svg width="10" height="18" viewBox="0 0 10 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.797 16.664.648 9.204A1.071 1.071 0 0 1 .375 8.5c0-.195.078-.43.234-.625L7.758.415a.932.932 0 0 1 1.328-.04c.39.352.39.938.039 1.328L2.602 8.5l6.562 6.875a.932.932 0 0 1-.039 1.328.932.932 0 0 1-1.328-.039Z" fill="#090A0B"/></svg>',I='<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.804 6.563 6.902 2.661l.619-.619L12.478 7l-4.983 4.983-.619-.619 3.927-3.926H1.96v-.875z" fill="#fff" stroke="#fff"/></svg>',w=`<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="20 16 10 12" fill="none">
  <path d="M22.1274 28L28.1274 22L22.1274 16" stroke="#5C5C5C" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`,i=(f="#fff",r="")=>`
<svg class="${r}" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
  <g clipPath="url(#pauseIcon)">
    <path
      d="M4.375 2.5c-.633 0-1.125.516-1.125 1.125v6.75A1.11 1.11 0 0 0 4.375 11.5h.75c.61 0 1.125-.492 1.125-1.125v-6.75A1.14 1.14 0 0 0 5.125 2.5h-.75Zm4.5 0c-.633 0-1.125.516-1.125 1.125v6.75A1.11 1.11 0 0 0 8.875 11.5h.75c.61 0 1.125-.492 1.125-1.125v-6.75A1.14 1.14 0 0 0 9.625 2.5h-.75Z"
      fill="#fff"
    />
  </g>
  <defs>
    <clipPath id="pauseIcon">
      <path fill="${f}" d="M3 2.5h8v9H3z" />
    </clipPath>
  </defs>
</svg>
`,o=({color:f="#fff",className:r=""}={})=>`<svg class="${r}" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" aria-label="Mute tolstoy video"><path d="M6.266 1.551a0.667 0.667 0 0 1 0.382 0.583v7.714c0 0.261 -0.161 0.482 -0.381 0.602a0.651 0.651 0 0 1 -0.703 -0.12L2.85 7.918h-1.346a1.269 1.269 0 0 1 -1.286 -1.286v-1.286c0 -0.703 0.562 -1.286 1.286 -1.286h1.346L5.563 1.671a0.651 0.651 0 0 1 0.703 -0.12Zm2.492 2.651 1.105 1.106 1.105 -1.106c0.18 -0.18 0.483 -0.18 0.663 0 0.201 0.201 0.201 0.502 0 0.683L10.526 5.991l1.106 1.104c0.201 0.201 0.201 0.502 0 0.683a0.44 0.44 0 0 1 -0.663 0l-1.106 -1.105 -1.104 1.106c-0.201 0.201 -0.502 0.201 -0.683 0 -0.201 -0.182 -0.201 -0.483 0 -0.684l1.105 -1.105L8.073 4.886c-0.2 -0.18 -0.2 -0.482 0 -0.683 0.182 -0.18 0.483 -0.18 0.684 0Z" fill="${f}"/></svg>`,u=({color:f="#fff",className:r=""}={})=>`<svg class="${r}" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" aria-label="Unmute tolstoy video"><path d="M6.627 1.55c.238.101.411.342.411.583v7.714c0 .261-.173.482-.411.603a.742.742 0 0 1-.757-.121l-2.921-2.41H1.5c-.779 0-1.385-.563-1.385-1.286V5.347c0-.703.606-1.286 1.385-1.286h1.449l2.921-2.39a.742.742 0 0 1 .757-.121Zm3.721 1.447c.931.723 1.537 1.788 1.537 2.993 0 1.225-.606 2.29-1.537 2.993a.542.542 0 0 1-.735-.06c-.195-.201-.152-.502.065-.683.714-.522 1.168-1.326 1.168-2.25 0-.904-.454-1.708-1.168-2.23a.475.475 0 0 1-.065-.683.565.565 0 0 1 .735-.08ZM9.029 4.503c.476.362.779.884.779 1.487 0 .623-.303 1.145-.779 1.507a.55.55 0 0 1-.736-.081.454.454 0 0 1 .087-.663.966.966 0 0 0 .389-.763.928.928 0 0 0-.389-.743.475.475 0 0 1-.087-.683.57.57 0 0 1 .736-.061Z" fill="${f}"/></svg>`,l=()=>`
<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#ff0000" stroke-width="2.4" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-alert"><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></svg>
`,$=()=>`
<svg width="40" height="20" xmlns="http://www.w3.org/2000/svg">
    <rect width="40" height="20" rx="3" ry="3" style="fill:blue;"/>
    <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="8" font-weight="normal" fill="white" letter-spacing="0.1px">
        Publish
    </text>
</svg>
`,g=()=>`
<svg height="30" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 220 60">
  <!-- Container Background -->
  <rect x="0" y="0" width="100%" height="100%" fill="#f5f6f7" rx="10" />

  <!-- Active Button: Videos -->
  <rect x="10" y="10" width="40%" height="80%" rx="8" fill="#ffffff" />
  <text x="60" y="30" font-family="Arial" font-size="14" font-weight="bold" fill="#000000" text-anchor="middle" dominant-baseline="middle">
    Videos
  </text>

  <!-- Inactive Button: Design -->
  <rect x="110" y="10" width="40%" height="80%" rx="8" fill="#f5f6f7" />
  <text x="160" y="30" font-family="Arial" font-size="14" fill="#888888" text-anchor="middle" dominant-baseline="middle">
    Design
  </text>
</svg>
`}),O("dQiGr",function(e,P){t(e.exports,"FEATURE_WIDGET_LOADING",function(){return n}),t(e.exports,"FEATURE_WIDGET_ONYOU",function(){return b}),t(e.exports,"FEATURE_WIDGET_ONYOU_ALL_PAGES",function(){return p}),t(e.exports,"FEATURE_WIDGET_FALLBACK_VIDEO",function(){return I}),t(e.exports,"FEATURE_CAROUSEL_SHOW_DOTS",function(){return w}),t(e.exports,"FEATURE_CAROUSEL_VIDEOS",function(){return i}),t(e.exports,"FEATURE_HIDE_SPOTLIGHT_PLUS_BUTTON",function(){return o}),t(e.exports,"FEATURE_APP_USE_CREATOR_PROFILE",function(){return l}),t(e.exports,"FEATURE_BLOCK_SHOPIFY_ADD_TO_CART_ATTRIBUTE",function(){return $}),t(e.exports,"FEATURE_SHOPIFY_PRICE_FORMATTING",function(){return g}),t(e.exports,"FEATURE_STORIES_SEARCH_BAR_CUSTOMIZATION",function(){return f});const n="widget-loading",b="widget-onyou",p="widget-onyou-enableAllPages",h="widget-site-activity-event",I="widget-video-fallback",w="carousel-show-dots",i="carousel-videos",o="hide-spotlight-plus-button",u="spotlight-auto-resize",l="app-use-creator-profile",$="block-shopify-add-to-cart-attribute",g="shopify-price-formatting",f="stories-search-bar-customization"}),O("jvykV",function(e,P){t(e.exports,"reloadFont",function(){return w});var n=d("e857j");const b=[];function p(i,o){const u="italic",l="normal",$={".ttf":"truetype",".otf":"opentype",".woff":"woff",".woff2":"woff2"},g=document.createElement("style");for(const f of Object.keys(i)){const r=i[f],v=f.includes(u),E=f.split("-")[1]||f.replace(u,"")||l,m=v?u:l,C=Object.keys($).find(_=>r.includes(_)),T=$[C],A=r.replace("http://","https://");g.append(document.createTextNode(`@font-face { font-family: '${o}'; src: url("${A}") format("${[T]}"); font-weight: ${E}; font-style: ${m}; font-display: swap;}`))}document.head.append(g)}const h=(i,o=1)=>{if(!(!i||o===3)){if(!document.querySelector("#tolstoyWidgetElement")){setTimeout(()=>{h(i,o+1)},1e3);return}document.querySelector("#tolstoyWidgetElement").style.fontFamily=`${i}, ${n.FALLBACK_FONTS}`}},I=i=>{const o=document.head.querySelectorAll("style");return Array.from(o).some(u=>u.textContent.includes(`@font-face { font-family: '${i}';`))};function w(i,o="tolstoy-custom-font-family"){if(!i||b.includes(o)||I(o))return;const{sources:u}=i;p(u,o),h(o),b.push(o)}}),O("e857j",function(e,P){t(e.exports,"FALLBACK_FONTS",function(){return h}),t(e.exports,"TOLSTOY_CUSTOM_FONT_FAMILY",function(){return I}),t(e.exports,"TOLSTOY_CUSTOM_HEADING_FONT_FAMILY",function(){return w});const n="default-header-title",b=100,p=9/16,h="Nunito Sans, sans-serif",I="tolstoy-custom-font-family",w="tolstoy-custom-heading-font-family"}),O("1A9Dw",function(e,P){t(e.exports,"default",function(){return w});var n=d("9bB3T"),b=d("bvKjB"),p=d("eSOI5");const h={A:"A",B:"B"};class I{constructor(o){this.widgetType=o}sendAbTestInitializedEvent({abTestId:o,group:u,excludeExternalAnalytics:l,probability:$}){const g={abTestId:o,eventName:b.EVENT_NAMES.abTestInitialized,sessionUniqueId:(0,p.getSessionUniqueId)(),testGroup:u,probability:$};this.analytics.sendEventImmediately(g,l)}initializeGroup({abTestId:o,probability:u,excludeExternalAnalytics:l}){const $=(0,p.getAbTestGroup)(o);if($){this.group=$;return}const f=Math.random()>u?h.B:h.A;this.group=f,this.sendAbTestInitializedEvent({abTestId:o,group:f,excludeExternalAnalytics:l,probability:u}),(0,p.setAbTestGroup)(o,f)}init(o){if(!o)return;const{abTestSettings:u={}}=o,{isEnabled:l,abTestId:$,probability:g,groupASettings:f={},groupBSettings:r={},excludeExternalAnalytics:v}=u;if(l)return this.analytics=new n.default({config:o,playerType:this.widgetType}),this.initializeGroup({abTestId:$,probability:g,excludeExternalAnalytics:v}),this.group===h.A?f:r}}var w=I}),O("9bB3T",function(e,P){t(e.exports,"default",function(){return g});var n=d("bvKjB"),b=d("aQK74"),p=d("igWUq"),h=d("50h3S"),I=d("i1NbZ"),w=d("eSOI5"),i=d("izL3O"),o=d("kK0IS"),u=d("lxjfR"),l=d("93NPo");class ${constructor({config:r,playerType:v,collectionId:E}){this.config=r,this.publishId=r.publishId,this.playerType=v,this.sessionId=(0,w.getSessionId)()||(0,u.uuidv4)(),this.anonymousId=(0,w.getAndSetAnonymousId)(),this.currentPageProductId=(0,I.getCurrentPageProductId)(),this.collectionId=E,this.errors={}}getIsMobile(){return window.screen.width<=450||window.screen.height<=450}getAnalyticsParams(r={}){const{id:v,appKey:E,name:m,googleAnalyticsID:C}=this.config,T=window.location.href.split("?")[0],A=(0,i.getShop)(),_=this.errors;return{appKey:E,publishId:this.publishId,sessionId:this.sessionId,anonymousId:this.anonymousId,currentPageProductId:this.currentPageProductId,isMobile:this.getIsMobile(),pageUrl:T,storeUrl:A,appUrl:A,googleAnalyticsID:C,projectId:v,playlist:m,timestamp:new Date().toISOString(),parentUrl:window.location.href,playerType:this.playerType,customParams:_?JSON.stringify(_):void 0,collectionId:this.collectionId,...r}}sendEventToAllSources(r){(0,o.createPlayerEvent)(r),(0,b.sendAnalyticsToExternalSource)({data:{...r,name:r.eventName}})}sendEventImmediately(r={},v=!1){const E=this.getAnalyticsParams(r);(0,o.sendEvent)(E),!v&&(0,b.sendAnalyticsToExternalSource)({data:{...E,name:E.eventName}})}sendEvent(r={},v=!1){if(!(0,l.verifyUserConsent)())return;const E=this.getAnalyticsParams(r);E.eventName===n.EVENT_NAMES.onYouClick&&console.log("Analytics::sendEvent::params",E),(0,o.createPlayerEvent)(E),!v&&(0,b.sendAnalyticsToExternalSource)({data:{...E,name:E.eventName}})}handlePageView(){(0,b.setImpressionByPublishId)(this.publishId,!1),this.sendEvent({eventName:n.EVENT_NAMES.pageView})}handleEmbedView(){(0,b.setImpressionByPublishId)(this.publishId,!0),this.sendEvent({eventName:n.EVENT_NAMES.embedView})}handleOnYouClick(){(0,b.setImpressionByPublishId)(this.publishId,!0),(0,w.setSessionId)(this.sessionId),this.sendEvent({eventName:n.EVENT_NAMES.onYouClick})}handleSessionStart(){const r=this.getAnalyticsParams({eventName:n.EVENT_NAMES.sessionStart});this.sendEventToAllSources(r),(0,p.handleTolstoyStart)({data:{...r,name:h.PLAYER_EVENT_NAMES.sessionStart}}),window.postMessage({...r,name:h.PLAYER_EVENT_NAMES.sessionStart},"*")}handleVideoLoaded(r={}){const v=this.getAnalyticsParams({...r,eventName:n.EVENT_NAMES.videoLoaded});this.sendEventToAllSources(v)}handleVideoWatched(r={}){const v=this.getAnalyticsParams({...r,eventName:n.EVENT_NAMES.videoWatched});this.sendEventToAllSources(v)}}var g=$}),O("igWUq",function(e,P){t(e.exports,"handleTolstoyStart",function(){return f}),t(e.exports,"handleWatchedProductIds",function(){return E}),t(e.exports,"handleOpenIntegration",function(){return m}),t(e.exports,"handleHideIntegration",function(){return C});var n=d("50h3S"),b=d("bvKjB"),p=d("8ptJJ"),h=d("519R9"),I=d("aEodP"),w=d("93NPo"),i=d("eSOI5");let o,u="";const l=s=>{s.data.eventName===p.TOLSTOY_PLAYER_READY_MESSAGE&&document.querySelector("#tolstoy")?.contentWindow.postMessage({parentUrl:`${window.location.origin}${window.location.pathname}`.slice(0,1999),name:"setTolstoyData",eventName:"setTolstoyData"},"*")},$=s=>{const x=document.querySelector("#smile-ui-container");s&&(u=x?.style.display||""),x?.style?.setProperty("display",s||u)},g=s=>{let x=0;return G=>{try{G()}catch(F){try{if(!(0,w.verifyUserConsent)())return;fetch("https://api.gotolstoy.com/events/event",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({eventName:"widgetError",text:F.message,timestamp:new Date().toISOString(),parentUrl:window.location.href,appKey:s.data.appKey,publishId:s.data.publishId,sessionId:s.data.sessionId,source:s.data.name,answerKey:`${x}`,currentPageProductId:G.toString(),formData:`${(F&&F.stack||"").slice(0,1999)}`})})}catch($e){(0,w.logDevelopmentError)($e)}}finally{x++}}},f=s=>{if(s.data.name===n.PLAYER_EVENT_NAMES.sessionStart||s.data.name===n.PLAYER_EVENTS.autoplayStart){const x=g(s);x(()=>(0,i.setPublishId)(s.data.publishId)),x(()=>(0,i.setTolstoyInteractionDate)(s.data.appKey,s.data.appUrl)),x(()=>(0,i.setSessionId)(s.data.sessionId)),x(()=>(0,i.updateTolstoyActivitySessionIdByPublishId)(s.data.publishId,s.data.sessionId)),x(()=>$("none")),x(()=>v(s.data.anonymousId))}},r=s=>{s.data.name===b.EVENT_NAMES.tolstoyModalClose&&$()},v=s=>{window.Shopify&&h.default.postMessage({eventName:I.INTERNAL_EVENTS.setAnonymousIdToCart,anonymousId:s})},E=({data:{name:s,publishId:x,productIds:G}={}})=>{if(s===p.TOLSTOY_WATCHED_PRODUCT_IDS_MESSAGE)for(const F of G)(0,i.pushTolstoyViewedProducts)({productId:F,publishId:x})},m=s=>{X[s.data.name]&&X[s.data.name](s.data)},C=s=>{J[s.data.name]&&setTimeout(()=>J[s.data.name](),500)},T=()=>{window.GorgiasChat&&(window.GorgiasChat.open?.(),window.tolstoyWidget.hide(),document.head.insertAdjacentHTML("beforeend","<style>#gorgias-chat-container iframe#chat-button { visibility: visible !important; display: block !important; }</style>"))},A=()=>{window.GorgiasChat&&(window.GorgiasChat.close?.(),document.head.insertAdjacentHTML("beforeend","<style>#gorgias-chat-container iframe#chat-button { visibility: hidden; display: none; }</style>"))},_=()=>{window.adaEmbed&&(window.adaEmbed.toggle(),window.tolstoyWidget.hide())},R=()=>{document.head.insertAdjacentHTML("beforeend","<style>#ada-button-frame { display: none; }</style>")},H=()=>{window.fcWidget&&(window.fcWidget.show(),window.fcWidget.open(),window.tolstoyWidget.hide())},D=()=>{window.fcWidget&&(window.fcWidget.close(),window.fcWidget.hide(),window.tolstoyWidget.show())},B=()=>{if(!o&&window.Reamaze?.popup){window.Reamaze.popup(),window.tolstoyWidget.hide();return}window._support&&o&&window.Reamaze?.reload&&(window._support.ui=o,window.Reamaze.reload(),o=null,window.tolstoyWidget.hide())},k=()=>{window._support?.ui&&window.Reamaze?.reload&&(o=window._support.ui,delete window._support.ui,window.Reamaze.reload(),window.tolstoyWidget.show())},z=()=>{const s=setTimeout(()=>clearInterval(x),9e3),x=setInterval(()=>{window.Intercom&&(window.Intercom("show"),window.tolstoyWidget.hide(),clearInterval(x),clearTimeout(s),window.Intercom("onHide",()=>{window.tolstoyWidget.show()}))})},j=()=>{const s=setTimeout(()=>clearInterval(x),9e3),x=setInterval(()=>{window.Intercom&&(window.Intercom("update",{hide_default_launcher:!0}),clearInterval(x),clearTimeout(s))},100)},c=()=>{window.Tawk_API&&(window.Tawk_API.maximize(),window.tolstoyWidget.hide())};function a(){window.Tawk_API&&window.Tawk_API.hideWidget()}const y=()=>{window.LiveChatWidget&&(window.LiveChatWidget.call("maximize"),window.tolstoyWidget.hide())};function L(){window.LiveChatWidget&&window.LiveChatWidget.call("hide")}const S=()=>{window.HubSpotConversations&&window.HubSpotConversations.widget&&(window.HubSpotConversations.widget.open(),window.tolstoyWidget.hide())};function W(){window.HubSpotConversations&&window.HubSpotConversations.widget&&window.HubSpotConversations.widget.close()}const U=()=>{window.Beacon&&(window.Beacon("open"),window.tolstoyWidget.hide(),window.Beacon("config",{display:{zIndex:"99999"}}))},N=()=>{window.Beacon&&window.Beacon("config",{display:{zIndex:"0"}})},M=()=>{window.drift&&(window.drift.api.toggleChat(),window.tolstoyWidget.hide())},Y=()=>{window.drift&&window.drift.api.widget.hide()},V=()=>{window.zE&&(window.zE("messenger","open"),document.querySelector('[title="Button to launch messaging window"]')?.style?.setProperty("display","block"),window.tolstoyWidget.hide())},K=()=>{const s=setTimeout(()=>clearInterval(x),5e3),x=setInterval(()=>{const G=document.querySelector('[title="Button to launch messaging window"]'),F=document.querySelector('[title="Message from company"]');G?.style?.setProperty("display","none"),F?.parentElement?.style?.setProperty("display","none"),G&&F&&(clearInterval(x),clearTimeout(s))},100);window.zE&&window.zE("messenger","close")},Z=()=>{window.tidioChatApi&&(window.tidioChatApi.show(),window.tidioChatApi.open(),window.tolstoyWidget.hide())},ee=()=>{window.tidioChatApi&&window.tidioChatApi.close()},te=s=>{if(window.certainly)switch(window.certainly.widgetStatus({action:"open"}),window.tolstoyWidget.hide(),s.data.key){case"PmkMI":window.certainly.goTo({module:"670442"});break;case"_23Hl":window.certainly.goTo({module:"670178"});break;case"P9rfq":window.certainly.goTo({module:"670179"});break;default:break}},oe=()=>{window.certainly&&window.certainly.widgetStatus({action:"hide"})},q=s=>{document.head.insertAdjacentHTML("beforeend",`<style>${s} { visibility: hidden; display: none; }</style>`)},ne=()=>{q("#vfChat+div"),q("#vfChat+div+div")},ie="tolstoyHideFreshChat",re="tolstoyOpenFreshChat",ae="tolstoyHideReamaze",se="tolstoyOpenReamaze",de="tolstoyHideAda",ce="tolstoyOpenAda",le="tolstoyHideTidio",fe="tolstoyOpenTidio",be="tolstoyHideCertainly",pe="tolstoyOpenCertainly",ue="tolstoyHideVfChat",X={[n.PLAYER_EVENT_NAMES.openGorgias]:T,[n.PLAYER_EVENT_NAMES.openIntercom]:z,[n.PLAYER_EVENT_NAMES.openTawkTo]:c,[n.PLAYER_EVENT_NAMES.openLiveChat]:y,[n.PLAYER_EVENT_NAMES.openHubSpot]:S,[n.PLAYER_EVENT_NAMES.openDrift]:M,[n.PLAYER_EVENT_NAMES.openZendesk]:V,[n.PLAYER_EVENT_NAMES.openHelpScout]:U,[re]:H,[se]:B,[ce]:_,[fe]:Z,[pe]:te},J={[n.PLAYER_EVENT_NAMES.hideGorgias]:A,[n.PLAYER_EVENT_NAMES.hideIntercom]:j,[n.PLAYER_EVENT_NAMES.hideTawkTo]:a,[n.PLAYER_EVENT_NAMES.hideLiveChat]:L,[n.PLAYER_EVENT_NAMES.hideHubSpot]:W,[n.PLAYER_EVENT_NAMES.hideDrift]:Y,[n.PLAYER_EVENT_NAMES.hideZendesk]:K,[n.PLAYER_EVENT_NAMES.hideHelpScout]:N,[ie]:D,[ae]:k,[de]:R,[ue]:ne,[le]:ee,[be]:oe}}),O("8ZCcc",function(e,P){t(e.exports,"getFeatureSettings",function(){return b}),t(e.exports,"getFeatureIsEnabled",function(){return p}),t(e.exports,"getIsPlayerLazy",function(){return h}),t(e.exports,"getPlayerOrigin",function(){return I}),t(e.exports,"getIsFallbackVideoDisabled",function(){return w});var n=d("dQiGr");const b=({config:i,featureKey:o})=>i?.featureSettings?.[o],p=({config:i,featureKey:o})=>!!i?.featureSettings?.[o],h=(i={})=>b({config:i,featureKey:n.FEATURE_WIDGET_LOADING})?.playerLazy,I=(i={})=>b({config:i,featureKey:n.FEATURE_WIDGET_LOADING})?.playerOrigin,w=(i={})=>b({config:i,featureKey:n.FEATURE_WIDGET_FALLBACK_VIDEO})?.dontUseFallback}),O("6MJM3",function(e,P){t(e.exports,"getBaseUrl",function(){return i}),t(e.exports,"getImageUrlByStep",function(){return o}),t(e.exports,"setVideoSourceOnEnd",function(){return u});var n=d("e8kzi"),b=d("kq83N"),p=d("j2c9o"),h=d("iG8TK");const I=480,w=({isMobile:l,isStory:$,isPlayInTileFirst:g,isTile:f})=>g||f?"_640.mp4":l||$?"_preview.mp4":"_preview_embed.mp4",i=({step:l,isStory:$,isPlayInTileFirst:g,height:f=h.DEFAULT_TILE_HEIGHT,isTile:r})=>{const{videoOwner:v,stockAsset:E,videoId:m}=l,C=window.innerWidth<=450,T=w({isMobile:C,isStory:$,isPlayInTileFirst:g,isTile:r}),A=E?.videoUrl,_=!!E?.shopifyFileId,R=E?.previewUrl,H=E?.hasOriginal,D=E?.gifUrl,B=_&&!H;return R&&!g&&f<I&&!r?R:A&&_?A:A&&!_?A?.includes("vimeo")?A:`${A.split(".mp4")[0]}${T}`:D&&B?`${D.split(".mp4")[0]}${T}`:(0,n.buildUrl)({ownerId:v,assetId:m,extension:T})},o=(l,$,g=b.IMAGE_DIMENSIONS["480x480"])=>{const r=window.innerWidth<=450?p.WEBP_AVATAR_EXTENSION:p.WEBP_EXTENSION;return(0,n.getImageUrl)({step:l,extension:r,posterSettings:$,size:g})},u=(l,$)=>{const g=()=>{if(l.autoplay){l.src="";return}l.src=$};l.addEventListener("ended",g,{once:!0})}}),O("e8kzi",function(e,P){t(e.exports,"buildUrl",function(){return p}),t(e.exports,"getPosterUrlFromStockAsset",function(){return h}),t(e.exports,"getImageUrl",function(){return I});var n=d("2Aomz"),b=d("kq83N");const p=({path:w=`${n.VIDEO_OUTPUT}/public`,ownerId:i="",assetId:o="",suffix:u="",extension:l=""})=>`${w}/${i}/${o}/${o}${u}${l}`,h=({stockAsset:w={},posterSettings:i={}})=>{const{useShopifyPoster:o=!0}=i,{shopifyPosterUrl:u,posterUrl:l}=w||{};return u&&o?u:l},I=({step:w,extension:i,posterSettings:o,size:u=b.IMAGE_DIMENSIONS["250x250"],custom:l={condition:"",callback:""},path:$=`${n.VIDEO_OUTPUT}/public`})=>{const{videoOwner:g,videoId:f,stockAsset:r={},mediaAssets:v}=w;if(!f)return"";const{avatarUrl:E,posterUrl:m,hasOriginal:C,shopifyPosterUrl:T}=r||{},{shopifyAttributes:A={},shopifySpotlightAttributes:_={},useShopifyPoster:R=!1}=o||{},H={...A,..._},D=!!Object.keys(H)?.length,B=T&&R&&D;if(m)return m;if(v&&v?.images&&v?.images[u]&&!B)return v.images[u];const k=!C&&(E||m);if(T&&!1){let j="width=300";return R&&(j=new URLSearchParams(H).toString()),`${T}&${j}`}return m?.endsWith(i)||m&&!C?m:l?.condition&&l?.callback&&l.condition({posterUrl:m,avatarUrl:E,extension:i,isDuplicated:k})?l.callback(r):p({path:$,ownerId:g,assetId:f,extension:i})}}),O("kq83N",function(e,P){t(e.exports,"DEFAULT_IMAGE_EXTENSION",function(){return n}),t(e.exports,"ASSET_TYPE",function(){return b}),t(e.exports,"IMAGE_SIZE",function(){return p}),t(e.exports,"IMAGE_SIZE_SUFFIX",function(){return h}),t(e.exports,"IMAGE_DIMENSIONS",function(){return I});const n=".webp",b={VIDEO:"video",IMAGE:"image",GALLERY:"gallery"},p={XS:250,S:480,M:960,L:1280,XL:1920},h={[p.XS]:"_250",[p.S]:"_480",[p.M]:"_960",[p.L]:"_1280",[p.XL]:"_1920"},I={"250x140":"250x140","250x250":"250x250","480x480":"480x480","960x540":"960x540"}}),O("j2c9o",function(e,P){t(e.exports,"WEBP_AVATAR_EXTENSION",function(){return n}),t(e.exports,"WEBP_EXTENSION",function(){return b}),t(e.exports,"JPG_AVATAR_EXTENSION",function(){return p}),t(e.exports,"JPG_EXTENSION",function(){return h});const n=".avatar.0000000.webp",b=".401.0000000.webp",p=".avatar.0000000.jpg",h=".0000000.jpg"})})();
