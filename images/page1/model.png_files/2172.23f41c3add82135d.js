"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2172],{22172:(e,t,s)=>{s.r(t),s.d(t,{default:()=>v});var o=s(80263),r=s(39995),a=s(43553),n=s(60604),i=s(21841),l=s(2144),c=s(96757),d=s(22544),u=s(76936),m=s(99523),h=s(67543),y=s(10895),x=s(14506),C=s.n(x),p=s(22117),f=s(53239),b=s(15900);let v=e=>{let{className:t,disablePreText:s=!1}=e,{data:x}=(0,a.I)({queryKey:["localizations"],queryFn:async()=>(await (0,r.$O)()).data}),v=(0,f.useMemo)(()=>(null==x?void 0:x.localization.availableCountries)||[],[x]),[I,N]=f.useState(()=>localStorage.getItem("customerCountry")||c.A.NEXT_PUBLIC_REGION),j=(0,f.useMemo)(()=>{var e;return null==(e=v.find(e=>e.isoCode===I))?void 0:e.currency},[v,I]),g=(0,p.useRouter)(),[w,S]=(0,f.useState)(!1),{CartBuyerIdentityUpdateMutation:_}=(0,u.M9)(),k=(0,h.A)(e=>null==e?void 0:e.cartId),A=m.A.get("shopifyBuyerIp")||"",E=()=>{let e=new URL(g.asPath,c.A.NEXT_PUBLIC_BASE_URL);e.searchParams.delete("country"),window.location.href=e.toString()},P=async e=>{if(!k){N(e.isoCode),localStorage.setItem("customerCountry",e.isoCode),E();return}S(!0);try{await _({cartId:k,buyerIP:A,buyerIdentity:{countryCode:e.isoCode}}),N(e.isoCode),localStorage.setItem("customerCountry",e.isoCode),E()}catch(e){(0,d.oR)({description:"Failed to Set the Currency.",variant:"destructive"})}S(!1)};return(0,o.jsxs)("div",{className:"shrink-0 flex items-center ".concat(t),children:[!s&&(0,o.jsx)("p",{className:"text-xs hidden mr-2 md:block",children:"YOU'RE SHOPPING IN:"}),(0,o.jsxs)(b.rI,{children:[(0,o.jsx)(b.ty,{asChild:!0,children:(0,o.jsx)(i.$,{variant:"unstyled",className:(0,y.A)("flex items-center justify-center no-underline scrollbar-none","text-[12px] font-normal space-x-1 group","w-[57px] min-h-6","hover:outline-none focus-visible:outline focus-visible:outline-2"),"aria-label":"Currency Dropdown",children:w||!j?(0,o.jsx)(l.A,{className:"size-5 border-[3px]"}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{children:"".concat(j.symbol).concat(j.isoCode)}),(0,o.jsx)(n.A,{className:"group-data-[state=open]:rotate-180 transition",width:16,height:16})]})})}),(0,o.jsx)(b.SQ,{sideOffset:8,className:"z-[1002] max-h-[400px] rounded-none border border-black",children:C()(v,"name").map(e=>(0,o.jsxs)(b._2,{"data-selected":I===e.isoCode||void 0,onClick:()=>P(e),className:"text-xs py-1 data-[selected]:underline hover:underline underline-offset-2",children:[e.name," (",e.currency.isoCode," ",e.currency.symbol,")"]},e.isoCode))})]})]})}}}]);